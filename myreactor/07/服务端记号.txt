服务端:

头文件:
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <sys/socket.h>
#include <sys/types.h>          
#include <arpa/inet.h>
#include <sys/fcntl.h>
#include <sys/epoll.h>
#include <netinet/tcp.h>      // TCP_NODELAY需要包含这个头文件。

  fcntl(fd, F_SETFL, fcntl(fd, F_GETFL) | O_NONBLOCK);

    // 创建服务端用于监听的listenfd。
    int listenfd = socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);

inet_addr



setsockopt(listenfd,SOL_SOCKET,SO_REUSEADDR,&opt,static_cast<socklen_t>(sizeof opt)); 
                               TCP_NODELAY           
                               SO_REUSEPORT
                               SO_KEEPALIVE

inet_ntoa   ntohs

EPOLLRDHUP

EPOLLIN|EPOLLPRI
    -1&&EINTR    -1&&EAGAIN || EWOULDBLOCK 

EPOLLOUT

